###
### Name: Timed Event Enable: Bloody Harvest (2020)
### Version: 1.1.1
### Author: Apocalyptech
### Contact: https://apocalyptech.com/contact.php
### Categories: event
###
### License: Creative Commons Attribution-ShareAlike 4.0 International (CC BY-SA 4.0)
### License URL: https://creativecommons.org/licenses/by-sa/4.0/
###

###
### Enables the Bloody Harvest event.  Will interfere with any other
### event which happens to be running.  (Only one can be fully
### active at a time.)
###
### Includes various balance changes and fixes which were active during
### the event, so you get as close to the "live" event experience as
### possible.
###
### This version of the mod will enable the 2020 version of the event.
### The only difference between it and other years is the rewards you
### get for completing challenges, which is tracked separately
### between years.
###
### Generated by gen_bloody_harvest_enable.py
###

###
### Global activation switches
###

SparkPatchEntry,(1,1,0,),/Game/GameData/GameplayGlobals.GameplayGlobals,ActiveLeague,0,,OL_BloodyHarvest
SparkPatchEntry,(1,1,0,),/Game/GameData/GameplayGlobals.GameplayGlobals,LeagueInstance,0,,2
SparkPatchEntry,(1,1,0,),/Game/GameData/Spawning/GlobalSpawnDLCData.GlobalSpawnDLCData,DLCs,0,,((Data=/Game/PatchDLC/BloodyHarvest/GameData/SpawnDLCScripts/SpawnDLC_BloodyHarvest.SpawnDLC_BloodyHarvest,IsEnabled=(BaseValueConstant=1.000000)))

# Activate main menu changes
SparkPatchEntry,(1,2,0,),/Game/Common/_Design/Table_MicropatchSwitches.Table_MicropatchSwitches,MainMenuAltBackground,Value,0,,(BaseValueConstant=3.000000)

###
### Hardcode Challenge Rewards
###

SparkPatchEntry,(1,1,0,),/Game/PatchDLC/BloodyHarvest/GameData/Challenges/LeagueChallenges/Challenge_BloodyHarvest_00_MetaChallenge.Default__Challenge_BloodyHarvest_00_MetaChallenge_C,TierRewardsPerInstance,0,,((LeagueInstance=1,TierRewards=((RewardWeaponTrinkets=(BP_BaseWeaponTrinketData_C'"/Game/PatchDLC/Alisma/Gear/WeaponTrinkets/_Shared/Trinket_League_BloodyHarvest_2020.Trinket_League_BloodyHarvest_2020"')),(RewardCustomizations=(ECHOThemeCustomizationData'"/Game/PatchDLC/Alisma/PlayerCharacters/_Customizations/EchoDevice/ECHOTheme_79.ECHOTheme_79"')),(RewardCustomizations=(OakCustomizationData'"/Game/PatchDLC/Alisma/PlayerCharacters/_Customizations/Beastmaster/Skins/CustomSkin_Beastmaster_63.CustomSkin_Beastmaster_63"',OakCustomizationData'"/Game/PatchDLC/Alisma/PlayerCharacters/_Customizations/Gunner/Skins/CustomSkin_Gunner_63.CustomSkin_Gunner_63"',OakCustomizationData'"/Game/PatchDLC/Alisma/PlayerCharacters/_Customizations/Operative/Skins/CustomSkin_Operative_63.CustomSkin_Operative_63"',OakCustomizationData'"/Game/PatchDLC/Alisma/PlayerCharacters/_Customizations/SirenBrawler/Skins/CustomSkin_Siren_63.CustomSkin_Siren_63"')),(RewardWeaponSkins=(BP_BaseWeaponSkinData_C'"/Game/PatchDLC/BloodyHarvest/Gear/Weapons/WeaponSkins/WeaponSkin_BloodyHarvest_02.WeaponSkin_BloodyHarvest_02"')))),(LeagueInstance=2,TierRewards=((RewardWeaponTrinkets=(BP_BaseWeaponTrinketData_C'"/Game/PatchDLC/Alisma/Gear/WeaponTrinkets/_Shared/Trinket_League_BloodyHarvest_2020.Trinket_League_BloodyHarvest_2020"')),(RewardCustomizations=(ECHOThemeCustomizationData'"/Game/PatchDLC/Alisma/PlayerCharacters/_Customizations/EchoDevice/ECHOTheme_79.ECHOTheme_79"')),(RewardCustomizations=(OakCustomizationData'"/Game/PatchDLC/Alisma/PlayerCharacters/_Customizations/Beastmaster/Skins/CustomSkin_Beastmaster_63.CustomSkin_Beastmaster_63"',OakCustomizationData'"/Game/PatchDLC/Alisma/PlayerCharacters/_Customizations/Gunner/Skins/CustomSkin_Gunner_63.CustomSkin_Gunner_63"',OakCustomizationData'"/Game/PatchDLC/Alisma/PlayerCharacters/_Customizations/Operative/Skins/CustomSkin_Operative_63.CustomSkin_Operative_63"',OakCustomizationData'"/Game/PatchDLC/Alisma/PlayerCharacters/_Customizations/SirenBrawler/Skins/CustomSkin_Siren_63.CustomSkin_Siren_63"')),(RewardWeaponSkins=(BP_BaseWeaponSkinData_C'"/Game/PatchDLC/BloodyHarvest/Gear/Weapons/WeaponSkins/WeaponSkin_BloodyHarvest_02.WeaponSkin_BloodyHarvest_02"')))))

###
### Increased chance of Terror-anointment drops from various sources
###

# Ghosts
SparkLevelPatchEntry,(1,1,0,MatchAll),/Game/PatchDLC/BloodyHarvest/Gear/_Design/_GearExtension/GParts/Att_EndGamePartTerror_Multiplier_Ghost.Att_EndGamePartTerror_Multiplier_Ghost:ValueResolver_ConstantAttributeValueResolver,Value.BaseValueScale,0,,10

# Bloody Harvest-specific Enemies
SparkLevelPatchEntry,(1,1,0,BloodyHarvest_P),/Game/PatchDLC/BloodyHarvest/Gear/_Design/_GearExtension/GParts/Att_EndGamePartTerror_Multiplier_BHEnemy.Att_EndGamePartTerror_Multiplier_BHEnemy:ValueResolver_ConstantAttributeValueResolver,Value.BaseValueScale,0,,10

# Bloody Harvest Red Chests
SparkLevelPatchEntry,(1,1,0,BloodyHarvest_P),/Game/PatchDLC/BloodyHarvest/Gear/_Design/_GearExtension/GParts/Att_EndGamePartTerror_Multiplier_RedChest.Att_EndGamePartTerror_Multiplier_RedChest:ValueResolver_ConstantAttributeValueResolver,Value.BaseValueScale,0,,10

# Captain Haunt
SparkCharacterLoadedEntry,(1,1,0,BPChar_HarvestBoss),/Game/PatchDLC/BloodyHarvest/Gear/_Design/_GearExtension/GParts/Att_EndGamePartTerror_Multiplier_Boss.Att_EndGamePartTerror_Multiplier_Boss:ValueResolver_ConstantAttributeValueResolver,Value.BaseValueScale,0,,10

###
### Captain Haunt Tweaks
###

# Increased drop rate
SparkPatchEntry,(1,2,0,),/Game/PatchDLC/BloodyHarvest/GameData/Balance/BloodyHarvest/DataTable_Season_Halloween.DataTable_Season_Halloween,HarvestBoss_LootDropChance,DamageScalar_2_28B25EC8493D1EB6C2138A962F659BCD,0,,0.25

# Increased health
SparkCharacterLoadedEntry,(1,2,0,BPChar_HarvestBoss),/Game/PatchDLC/BloodyHarvest/Enemies/_Shared/_Design/Balance/Table_Balance_HarvestEnemies.Table_Balance_HarvestEnemies,Boss_Normal,HealthMultiplier_02_Secondary_12_9204082C4992E4200D005C8CBA622E49,0,,15
SparkCharacterLoadedEntry,(1,2,0,BPChar_HarvestBoss),/Game/PatchDLC/BloodyHarvest/Enemies/_Shared/_Design/Balance/Table_Balance_HarvestEnemies_PT2.Table_Balance_HarvestEnemies_PT2,Boss_Normal,HealthMultiplier_02_Secondary_12_9204082C4992E4200D005C8CBA622E49,0,,30

# Drop from Boss pool, instead of Miniboss
SparkCharacterLoadedEntry,(1,1,0,BPChar_HarvestBoss),/Game/PatchDLC/BloodyHarvest/Enemies/Heavy/_Unique/HarvestBoss/_Design/Character/BPChar_HarvestBoss.BPChar_HarvestBoss_C:AIBalanceState_GEN_VARIABLE,DropOnDeathItemPools.ItemPoolLists.ItemPoolLists[0],0,,ItemPoolListData'"/Game/GameData/Loot/ItemPools/ItemPoolList_Boss.ItemPoolList_Boss"'

# Audio fixes
SparkCharacterLoadedEntry,(1,1,1,BPChar_HarvestBoss),/Game/PatchDLC/BloodyHarvest/Enemies/Heavy/_Unique/HarvestBoss/_Design/Character/BPChar_HarvestBoss.BPChar_HarvestBoss_C:DefaultAudioComponent_GEN_VARIABLE,EmitterGain,0,,10
SparkCharacterLoadedEntry,(1,1,1,BPChar_HarvestBoss),/Game/PatchDLC/BloodyHarvest/Enemies/Heavy/_Unique/HarvestBoss/_Design/Character/BPChar_HarvestBoss.BPChar_HarvestBoss_C:DefaultAudioComponent_GEN_VARIABLE,RelativeScale3D,0,,(X=20.000000,Y=20.000000,Z=20.000000)

###
### Other Tweaks/Fixes
###

# Increase hecktoplasm drop quantities from ghosts
SparkCharacterLoadedEntry,(1,1,0,MatchAll),/Game/PatchDLC/BloodyHarvest/Missions/Side/Seasonal/BloodyHarvest_Intro/ItemPoolList_Ghost_MissionItems_Normal.ItemPoolList_Ghost_MissionItems_Normal,ItemPools.ItemPools[0].NumberOfTimesToSelectFromThisPool.BaseValueConstant,0,,3
SparkCharacterLoadedEntry,(1,1,0,MatchAll),/Game/PatchDLC/BloodyHarvest/Missions/Side/Seasonal/BloodyHarvest_Intro/ItemPoolList_Ghost_MissionItems_Normal.ItemPoolList_Ghost_MissionItems_Normal,ItemPools.ItemPools[1].NumberOfTimesToSelectFromThisPool.BaseValueConstant,0,,3
SparkCharacterLoadedEntry,(1,1,0,MatchAll),/Game/PatchDLC/BloodyHarvest/Missions/Side/Seasonal/BloodyHarvest_Intro/ItemPoolList_Ghost_MissionItems_Badass.ItemPoolList_Ghost_MissionItems_Badass,ItemPools.ItemPools[0].NumberOfTimesToSelectFromThisPool.BaseValueConstant,0,,3
SparkCharacterLoadedEntry,(1,1,0,MatchAll),/Game/PatchDLC/BloodyHarvest/Missions/Side/Seasonal/BloodyHarvest_Intro/ItemPoolList_Ghost_MissionItems_Badass.ItemPoolList_Ghost_MissionItems_Badass,ItemPools.ItemPools[1].NumberOfTimesToSelectFromThisPool.BaseValueConstant,0,,3
SparkCharacterLoadedEntry,(1,1,0,MatchAll),/Game/PatchDLC/BloodyHarvest/Missions/Side/Seasonal/BloodyHarvest_Intro/ItemPoolList_Ghost_MissionItems_Loot.ItemPoolList_Ghost_MissionItems_Loot,ItemPools.ItemPools[0].NumberOfTimesToSelectFromThisPool.BaseValueConstant,0,,5
SparkCharacterLoadedEntry,(1,1,0,MatchAll),/Game/PatchDLC/BloodyHarvest/Missions/Side/Seasonal/BloodyHarvest_Intro/ItemPoolList_Ghost_MissionItems_Loot.ItemPoolList_Ghost_MissionItems_Loot,ItemPools.ItemPools[1].NumberOfTimesToSelectFromThisPool.BaseValueConstant,0,,5

# Increase quantity of drops from Loot Ghosts, and make legendaries more likely
SparkCharacterLoadedEntry,(1,1,0,MatchAll),/Game/PatchDLC/BloodyHarvest/Enemies/Ghost/_Shared/LootPool/ItemPool_BH_LootGhost.ItemPool_BH_LootGhost,Quantity,0,,(BaseValueConstant=7,DataTableValue=(DataTable=None,RowName="",ValueName=""),BaseValueAttribute=None,AttributeInitializer=None,BaseValueScale=1)
SparkCharacterLoadedEntry,(1,1,0,MatchAll),/Game/PatchDLC/BloodyHarvest/Enemies/Ghost/_Shared/LootPool/ItemPool_BH_LootGhost.ItemPool_BH_LootGhost,BalancedItems.BalancedItems[4].Weight.BaseValueConstant,0,,0.032759

